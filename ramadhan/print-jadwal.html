<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jadwal Shalat</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <link href="./assets/css/style.css" rel="stylesheet" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#1D55A0",
              junglegreen: "#27B092",
              sandstorm: "#F4CE3F",
              water: "#D6F5FC",
              urobilin: "#E4BC27",
              quicksilver: "#A6A6A6",
              eerieblack: "#1E1E1E",
            },
            screens: {
              "2xs": "390px",
              // => @media (min-width: 390px) { ... }

              xs: "480px",
              // => @media (min-width: 480px) { ... }

              sm: "640px",
              // => @media (min-width: 640px) { ... }

              md: "768px",
              // => @media (min-width: 768px) { ... }

              lg: "1024px",
              // => @media (min-width: 1024px) { ... }

              xl: "1280px",
              // => @media (min-width: 1280px) { ... }

              "2xl": "1536px",
              // => @media (min-width: 1536px) { ... }
            },
          },
        },
      };
    </script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css"
      rel="stylesheet"
    />
    <style>
      .head td,
      .TabListJadwal td {
        padding: 3px 0px;
        text-align: center;
      }
      tbody tr td,
      tbody tr {
        border: 0px;
      }
      tbody tr:first-child td:first-child {
        border-radius: 20px 0px 0px 0px;
      }
      tbody tr:first-child td:last-child {
        border-radius: 0px 20px 0px 0px;
      }
      tbody tr:last-child td:first-child {
        border-radius: 0px 0px 0px 20px;
      }
      tbody tr:last-child td:last-child {
        border-radius: 0px 0px 20px 0px;
      }
      .bg1,
      .bg2 {
        font-weight: bold;
      }
      .bg1:not(.active) {
        background: #fef0c1;
      }
      .bg2:not(.active) {
        background: #fcd99d;
      }
      #jadwal-shalat {
        width: 920px;
        height: 1330px;
        margin: auto;
      }
      tbody tr:first-child td {
        background: #f15c2b;
        color: #fff;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <!-- Reminder -->
    <div id="jadwal-shalat">
      <div class="relative">
        <img
          src="./assets/images/reminder/bg-table.png"
          style="
            position: absolute;
            object-fit: cÆ’over;
            width: 100%;
            height: 100%;
            inset: 0px;
            z-index: 1;
          "
          alt="bg"
        />
        <h3
          class="capitalize font-bold text-[#fff] text-[16px] absolute top-[230px] left-[83px] z-[6]"
        >
          UNTUK WILAYAH JAKARTA & SEKITARNYA
        </h3>

        <!-- === ini gw buat kaya gini karna di figmanya berupa image full === -->
        <div class="px-5 pt-5 pb-[100px]">
          <table
            id="timetable"
            class="TabJadwal z-[2] relative mt-[280px]"
            width="100%"
            border="0"
            align="center"
            cellpadding="0"
            cellspacing="0"
          >
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <div align="center" style="margin-top: 7px">
      <a
        id="time-format"
        href="javascript:switchFormat(1)"
        title="Change clock format"
        class="command"
      ></a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>

    <script
      src="https://momentjs.com/downloads/moment-with-locales.min.js"
      type="text/javascript"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/moment-hijri@2.1.2/moment-hijri.min.js"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      type="text/javascript"
    ></script>
    <script
      src="https://assets.suara.com/suara/desktop/js/praytimes.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      moment.locale("id-ID");
      var currentDate = new Date();
      var timeFormat = 1;
      switchFormat(0);

      function pilih_kota() {
        // var pilihan_kota = document.getElementById('pilihan_kota');
        // var kota = pilihan_kota.value;
        var kota = getQueryVariable("kota");
        if (kota == 1) {
          geo = [-2.63, 140.58, 134.35];
          timezone = +9;
        } else if (kota == 2) {
          geo = [-7.25599, 110.406585, 520.42];
          timezone = +7;
        } else if (kota == 3) {
          geo = [-3.65607, 128.166419, 112.15];
          timezone = +9;
        } else if (kota == 4) {
          geo = [-9.101069, 124.890999, 342.87];
          timezone = +8;
        } else if (kota == 5) {
          geo = [-7.1008901, 112.1768595, 11.83];
          timezone = +7;
        } else if (kota == 6) {
          geo = [-1.2635389, 116.8278833, 72.56];
          timezone = +8;
        } else if (kota == 7) {
          geo = [5.546182, 95.319054, 8.09];
          timezone = +7;
        } else if (kota == 8) {
          geo = [-5.45, 105.2666667, 7.72];
          timezone = +7;
        } else if (kota == 9) {
          geo = [-6.9147444, 107.6098111, 716.71];
          timezone = +7;
        } else if (kota == 10) {
          geo = [-7.0247504, 112.7491906, 2.95];
          timezone = +7;
        } else if (kota == 11) {
          geo = [-3.328499, 114.589203, 5.9];
          timezone = +8;
        } else if (kota == 12) {
          geo = [-7.8859299, 110.3304883, 51.0];
          timezone = +7;
        } else if (kota == 13) {
          geo = [-7.5285527, 109.2992281, 24.75];
          timezone = +7;
        } else if (kota == 14) {
          geo = [-8.2102562, 114.3735107, 11.95];
          timezone = +7;
        } else if (kota == 15) {
          geo = [1.03, 103.92, 3.07];
          timezone = +7;
        } else if (kota == 16) {
          geo = [-6.2333333, 107.0, 17.0];
          timezone = +7;
        } else if (kota == 17) {
          geo = [-3.800649, 102.256203, 9.8];
          timezone = +7;
        } else if (kota == 18) {
          geo = [-1.161438, 136.047419, 0.0];
          timezone = +9;
        } else if (kota == 19) {
          geo = [-8.460566, 118.727402, 32.6];
          timezone = +8;
        } else if (kota == 20) {
          geo = [3.5986111, 98.4802778, 36.84];
          timezone = +7;
        } else if (kota == 21) {
          geo = [5.2018479, 96.7075712, 19.0];
          timezone = +7;
        } else if (kota == 22) {
          geo = [-8.07288, 112.166496, 214.0];
          timezone = +7;
        } else if (kota == 23) {
          geo = [-6.9711401, 111.4211679, 90.09];
          timezone = +7;
        } else if (kota == 24) {
          geo = [-6.589166, 106.792999, 250.89];
          timezone = +7;
        } else if (kota == 25) {
          geo = [-7.1625259, 111.8689675, 20.81];
          timezone = +7;
        } else if (kota == 26) {
          geo = [-6.48, 107.78, 40.37];
          timezone = +7;
        } else if (kota == 27) {
          geo = [-7.91175, 113.821788, 261.36];
          timezone = +7;
        } else if (kota == 28) {
          geo = [-4.538772, 120.324997, 33.98];
          timezone = +8;
        } else if (kota == 29) {
          geo = [0.135697, 117.498596, 4.0];
          timezone = +8;
        } else if (kota == 30) {
          geo = [-7.517291, 110.593441, 459.51];
          timezone = +7;
        } else if (kota == 31) {
          geo = [-6.872122, 109.043126, 7.25];
          timezone = +7;
        } else if (kota == 32) {
          geo = [-7.05, 109.55, 21.17];
          timezone = +7;
        } else if (kota == 33) {
          geo = [-0.26695, 100.383479, 881.42];
          timezone = +7;
        } else if (kota == 34) {
          geo = [-7.244098, 109.006387, 185.17];
          timezone = +7;
        } else if (kota == 35) {
          geo = [-7.14854, 111.594775, 31.27];
          timezone = +7;
        } else if (kota == 36) {
          geo = [-6.811812, 107.1454123, 447.66];
          timezone = +7;
        } else if (kota == 37) {
          geo = [-6.2513004, 107.1662691, 11.71];
          timezone = +7;
        } else if (kota == 38) {
          geo = [-7.34, 109.0, 239.61];
          timezone = +7;
        } else if (kota == 39) {
          geo = [-5.936396, 106.006401, 79.02];
          timezone = +7;
        } else if (kota == 40) {
          geo = [-6.7166667, 108.5666667, 6.28];
          timezone = +7;
        } else if (kota == 41) {
          geo = [-6.8946944, 110.6386151, 6.18];
          timezone = +7;
        } else if (kota == 42) {
          geo = [-8.65629, 115.222099, 29.44];
          timezone = +8;
        } else if (kota == 43) {
          geo = [-6.3918409, 106.8060388, 86.36];
          timezone = +7;
        } else if (kota == 44) {
          geo = [1.665742, 101.447601, 1.33];
          timezone = +7;
        } else if (kota == 45) {
          geo = [-8.854053, 121.654198];
          timezone = +8;
        } else if (kota == 46) {
          geo = [-7.2483974, 107.9096516, 823.93];
          timezone = +7;
        } else if (kota == 47) {
          geo = [-7.608392, 109.5183087, 24.28];
          timezone = +7;
        } else if (kota == 48) {
          geo = [0.5333333, 123.0666667, 10.42];
          timezone = +8;
        } else if (kota == 49) {
          geo = [-7.1607647, 112.6470548, 16.58];
          timezone = +7;
        } else if (kota == 50) {
          geo = [-6.3926946, 108.2875448, 6.2];
          timezone = +7;
        } else if (kota == 51) {
          geo = [-6.211544, 106.845172, 10.22];
          timezone = +7;
        } else if (kota == 52) {
          geo = [-1.596672, 103.615799, 18.61];
          timezone = +7;
        } else if (kota == 53) {
          geo = [-2.541279, 140.71373, 11.6];
          timezone = +9;
        } else if (kota == 54) {
          geo = [-8.1737757, 113.6952322, 85.37];
          timezone = +7;
        } else if (kota == 55) {
          geo = [-6.5934498, 110.6684501, 6.64];
          timezone = +7;
        } else if (kota == 56) {
          geo = [-8.4391662, 115.6091028, 132.03];
          timezone = +8;
        } else if (kota == 57) {
          geo = [-7.6693525, 109.651026, 27.66];
          timezone = +7;
        } else if (kota == 58) {
          geo = [-7.816895, 112.011398, 71.67];
          timezone = +7;
        } else if (kota == 59) {
          geo = [-3.9674889, 122.5947, 64.6];
          timezone = +8;
        } else if (kota == 60) {
          geo = [-7.702021, 110.6027882, 166.01];
          timezone = +7;
        } else if (kota == 61) {
          geo = [-3.1, 114.35, 5.52];
          timezone = +7;
        } else if (kota == 62) {
          geo = [4.2857168, 98.0593381, 16.21];
          timezone = +7;
        } else if (kota == 63) {
          geo = [-6.8083451, 110.8417977, 25.67];
          timezone = +7;
        } else if (kota == 64) {
          geo = [-8.725478, 115.177939, 8.35];
          timezone = +8;
        } else if (kota == 65) {
          geo = [-7.1123444, 112.4174243, 7.1];
          timezone = +7;
        } else if (kota == 66) {
          geo = [4.48, 97.9633333, 7.0];
          timezone = +7;
        } else if (kota == 67) {
          geo = [5.1880556, 97.1402778, 5.08];
          timezone = +7;
        } else if (kota == 68) {
          geo = [-3.2966667, 102.8616667, 140.84];
          timezone = +7;
        } else if (kota == 69) {
          geo = [-8.133221, 113.222604, 56.68];
          timezone = +7;
        } else if (kota == 70) {
          geo = [-7.629714, 111.513702, 68.52];
          timezone = +7;
        } else if (kota == 71) {
          geo = [-7.481253, 110.213799, 366.38];
          timezone = +7;
        } else if (kota == 72) {
          geo = [-7.6534687, 111.3295943, 361.03];
          timezone = +7;
        } else if (kota == 73) {
          geo = [-6.8340124, 108.2276311, 126.1];
          timezone = +7;
        } else if (kota == 74) {
          geo = [-5.1205733, 119.4875668, 4.0];
          timezone = +8;
        } else if (kota == 75) {
          geo = [-7.981894, 112.626503, 450.76];
          timezone = +7;
        } else if (kota == 76) {
          geo = [1.4930556, 124.8412611, 14.84];
          timezone = +8;
        } else if (kota == 77) {
          geo = [-0.861522, 134.078796, 49.64];
          timezone = +9;
        } else if (kota == 78) {
          geo = [-3.411598, 114.8452, 11.17];
          timezone = +8;
        } else if (kota == 79) {
          geo = [-8.5833333, 116.1166667, 25.17];
          timezone = +8;
        } else if (kota == 80) {
          geo = [-8.620843, 122.207703, 22.0];
          timezone = +8;
        } else if (kota == 81) {
          geo = [3.585242, 98.6755979, 25.59];
          timezone = +7;
        } else if (kota == 82) {
          geo = [-8.495994, 140.394501, 6.69];
          timezone = +9;
        } else if (kota == 83) {
          geo = [4.136209, 96.124878, 0.79];
          timezone = +7;
        } else if (kota == 84) {
          geo = [-7.4722222, 112.4336111, 24.93];
          timezone = +7;
        } else if (kota == 85) {
          geo = [-3.358418, 135.495697, 0.0];
          timezone = +9;
        } else if (kota == 86) {
          geo = [-7.5999754, 111.8993426, 58.73];
          timezone = +7;
        } else if (kota == 87) {
          geo = [-0.95373, 100.351997, 0.19];
          timezone = +7;
        } else if (kota == 88) {
          geo = [-2.226667, 113.944167, 13.04];
          timezone = +7;
        } else if (kota == 89) {
          geo = [-2.9911083, 104.7567333, 8.78];
          timezone = +7;
        } else if (kota == 90) {
          geo = [-0.898583, 119.850601, 14.97];
          timezone = +8;
        } else if (kota == 91) {
          geo = [-7.1622537, 113.4830011, 15.47];
          timezone = +7;
        } else if (kota == 92) {
          geo = [-7.650304, 112.705704, 146.73];
          timezone = +7;
        } else if (kota == 93) {
          geo = [-2.12, 106.1, 10.7];
          timezone = +7;
        } else if (kota == 94) {
          geo = [-7.644872, 112.903297, 9.57];
          timezone = +7;
        } else if (kota == 95) {
          geo = [0.5333333, 101.45, 13.74];
          timezone = +7;
        } else if (kota == 96) {
          geo = [2.957024, 99.064743, 396.8];
          timezone = +7;
        } else if (kota == 97) {
          geo = [-3.3928478, 119.3615593, 140.53];
          timezone = +8;
        } else if (kota == 98) {
          geo = [-7.8722056, 111.4612943, 102.47];
          timezone = +7;
        } else if (kota == 99) {
          geo = [-0.022523, 109.330307, 2.4];
          timezone = +7;
        } else if (kota == 100) {
          geo = [-1.4023793, 120.7582178, 16.83];
          timezone = +7;
        } else if (kota == 101) {
          geo = [-7.690094, 112.644027, 564.42];
          timezone = +7;
        } else if (kota == 102) {
          geo = [-7.756928, 113.211502, 13.2];
          timezone = +7;
        } else if (kota == 103) {
          geo = [5.888034, 95.316528, 3.7];
          timezone = +7;
        } else if (kota == 104) {
          geo = [-0.502183, 117.153801, 5.23];
          timezone = +8;
        } else if (kota == 105) {
          geo = [-7.1913129, 113.2532267, 3.25];
          timezone = +7;
        } else if (kota == 106) {
          geo = [-2.531114, 112.9562, 6.4];
          timezone = +7;
        } else if (kota == 107) {
          geo = [-6.9666667, 110.4166667, 6.87];
          timezone = +7;
        } else if (kota == 108) {
          geo = [-6.14739858, 106.09154789, 29.01];
          timezone = +7;
        } else if (kota == 109) {
          geo = [1.740266, 98.783546, 19.18];
          timezone = +7;
        } else if (kota == 110) {
          geo = [5.375675, 95.942575, 9.82];
          timezone = +7;
        } else if (kota == 111) {
          geo = [0.908795, 108.984596, 2.36];
          timezone = +7;
        } else if (kota == 112) {
          geo = [-7.702981, 114.01477, 37.28];
          timezone = +7;
        } else if (kota == 113) {
          geo = [-7.289166, 112.734398, 7.51];
          timezone = +7;
        } else if (kota == 114) {
          geo = [-7.5666667, 110.8166667, 94.87];
          timezone = +7;
        } else if (kota == 115) {
          geo = [-8.54504, 115.11996, 108.8];
          timezone = +8;
        } else if (kota == 116) {
          geo = [-6.1783056, 106.6318889, 16.76];
          timezone = +7;
        } else if (kota == 117) {
          geo = [3.27609, 117.6194, 18.25];
          timezone = +8;
        } else if (kota == 118) {
          geo = [-7.3333333, 108.2, 371.37];
          timezone = +7;
        } else if (kota == 119) {
          geo = [0.788068, 127.377156, 51.8];
          timezone = +9;
        } else if (kota == 120) {
          geo = [0.6833333, 127.4, 508.6];
          timezone = +9;
        } else if (kota == 121) {
          geo = [-8.0764078, 111.7060356, 112.12];
          timezone = +7;
        } else if (kota == 122) {
          geo = [-6.899584, 112.04617, 23.23];
          timezone = +7;
        } else if (kota == 123) {
          geo = [-8.4973881, 115.2658424, 243.78];
          timezone = +8;
        } else if (kota == 124) {
          geo = [-7.1275358, 110.4044812, 317.01];
          timezone = +7;
        } else if (kota == 125) {
          geo = [-9.662806, 120.266899, 19.85];
          timezone = +8;
        } else if (kota == 126) {
          geo = [-7.3650227, 109.9022273, 773.56];
          timezone = +7;
        } else if (kota == 127) {
          geo = [-7.797224, 110.368797, 113.31];
          timezone = +7;
        }
      }

      // display monthly timetable
      function displayMonth(offset) {
        // document.write(geo);
        // var geo = 'undefined';
        // if(geo==null){
        //  var geo = [-6.21154400, 106.84517200, 10.22];
        //  var timezone = +7;
        // }
        // document.write(geo);

        currentDate.setMonth(currentDate.getMonth() + 1 * offset);
        var month = currentDate.getMonth();
        var year = currentDate.getFullYear();
        var title = monthFullName(month) + " " + year;
        // $('table-title').innerHTML = title;
        makeTable(year, month, geo, timezone);
      }

      // make monthly timetable
      function makeTable(year, month, geo, timeZone) {
        prayTimes.tune({
          imsak: 2,
          subuh: 2,
          dhuhur: 3,
          ashar: 3,
          maghrib: 4,
          isya: 2,
        });

        var items = {
          // no: "No",
          day: "Tanggal",
          imsak: "Imsak",
          subuh: "Subuh",
          dhuhur: "Dhuhur",
          ashar: "Ashar", // sunset: 'Sunset',
          maghrib: "Maghrib",
          isya: "Isya",
        };

        var tbody = document.createElement("tbody");
        tbody.appendChild(makeTableRow(items, items, "TabTitleJadwal head"));

        var date = new Date(year, month, 1);
        var endDate = new Date(year, month + 2, 1);
        var format = "24h";
        var x = 1;
        var i = 1;
        var clas = "";
        var bulan = currentDate.getMonth();

        while (date < endDate) {
          var hijri = moment(date).format("iD iMMMM iYYYY");
          if (x % 2 != 0) {
            clas = "TabListJadwal bg1";
          } else {
            clas = "TabListJadwal bg2";
          }
          var times = prayTimes.getTimes(date, geo, timeZone);
          times.day = hijri;
          var klass = clas;
          date.setDate(date.getDate() + 1); // next daylight
          if (hijri.toLowerCase().includes("ramadhan")) {
            // times.no = i;
            tbody.appendChild(makeTableRow(times, items, klass));
            i++;
          }
          x++;
        }
        // alert(print_r(times));
        removeAllChild($("timetable"));
        $("timetable").appendChild(tbody);
      }

      // make a table row
      function makeTableRow(data, items, klass) {
        // alert(print_r(data));
        var row = document.createElement("tr");
        var month = currentDate.getMonth();
        for (var i in items) {
          var cell = document.createElement("td");
          cell.innerHTML = data[i];
          cell.style.width = i === "day" ? "130px" : "3.7em";
          if (
            (i == "imsak" && data[i] !== "Imsak") ||
            (i == "maghrib" && data[i] !== "Maghrib")
          ) {
            if (
              klass === "TabListJadwal bg1" &&
              klass !== "TabListJadwal bg1 active"
            ) {
              cell.style.background = "#faae7b";
            }
            if (
              klass === "TabListJadwal bg2" &&
              klass !== "TabListJadwal bg2 active"
            ) {
              cell.style.background = "#f9a26a";
            }
          }
          row.appendChild(cell);
        }
        row.className = klass;
        return row;
      }

      // remove all children of a node
      function removeAllChild(node) {
        if (node == undefined || node == null) return;

        while (node.firstChild) node.removeChild(node.firstChild);
      }

      // switch time format
      function switchFormat(offset) {
        var formats = ["24-hour", ""];
        timeFormat = (timeFormat + offset) % 2;
        $("time-format").innerHTML = formats[timeFormat];
        show();
      }

      // update table
      // function update() {
      //   pilih_kota();
      //   displayMonth(0);
      // }

      function show() {
        pilih_kota();
        displayMonth(0);
        // jadwal_imsakiyah();
      }

      // return month full name
      function monthFullName(month) {
        var monthName = new Array(
          "Januari",
          "Februari",
          "Maret",
          "April",
          "Mei",
          "Juni",
          "Juli",
          "Agustus",
          "September",
          "Oktober",
          "November",
          "Desember"
        );
        return monthName[month];
      }

      function $(id) {
        return document.getElementById(id);
      }

      function print_r(arr, level) {
        //fungsi print array buat cek error
        var dumped_text = "";
        if (!level) level = 0;

        //The padding given at the beginning of the line.
        var level_padding = "";
        for (var j = 0; j < level + 1; j++) level_padding += "    ";

        if (typeof arr == "object") {
          //Array/Hashes/Objects
          for (var item in arr) {
            var value = arr[item];

            if (typeof value == "object") {
              //If it is an array,
              dumped_text += level_padding + "'" + item + "' ...\n";
              dumped_text += print_r(value, level + 1);
            } else {
              dumped_text +=
                level_padding + "'" + item + "' => \"" + value + '"\n';
            }
          }
        } else {
          //Stings/Chars/Numbers etc.
          dumped_text = "===>" + arr + "<===(" + typeof arr + ")";
        }
        return dumped_text;
      }

      function getQueryVariable(variable) {
        // get parameter kota
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split("=");
          if (pair[0] == variable) {
            return pair[1];
          }
        }
        return 51; //default jakarta=51
      }

      window.onload = function () {
        show();
        window.print();
      };
    </script>
  </body>
</html>
